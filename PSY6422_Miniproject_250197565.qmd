---
title: "PSY6422_Miniproject_250197565"
format: html
editor: visual
---

## Introduction

### Data Origins

The data set used for this mini-project was from a data paper titled [*'Data on Connection With the Natural Environment and Its Impact on Mental Health Among Allotment and Non-Allotment Owners'*](https://openpsychologydata.metajnl.com/articles/10.5334/jopd.122), by L. Haywood and J. Stiller(2024). The paper can be found on the [Journal of Open Psychology Data](https://openpsychologydata.metajnl.com/) website and the data set is available to download there.

The data was collected using an online survey from allotment and non-allotment owners with the aim of observing the relationship between well-being and engagement with activities in nature.

The questionnaire had items about demographics(age, gender, nationality), and questions regarding ownership and engagement in allotment activities, including time spent in nature and the types of outdoor activities. Along with that, mental health, self-esteem, physical health, connection to nature, social identity, loneliness, social support and self-efficacy were measured. A comprehensive guide of the items and scales used in the questionnaire can be found in the data paper on the Journal of Open Psychology Data website.

(Explain why these variables were chosen in brief)

### Research Question

Using the data set from the above paper, this mini-project will attempt to visualize the relationship between mental health, time spent in nature, and connection to nature, and any potential differences in men and women. and attempt to answer the question â€” 'Does time spent in nature improve mental health?'

### **Data Preparation**

The published data set has already been cleared of errors, outliers and required items have been reverse coded. The variables and column names are also compatible and easy to work with in R.

Data preparation will start with importing the data.

```{r}
#Install tidyverse in console for data wrangling
#Code--> install.packages("tidyverse")
library(tidyverse)

#Import dataset and create an object for easy management
#Use correct pathway as required 
#Only used csv file name here since it is already in the project folder
rawdata <- read_csv("connection_to_nature_data.csv")


```

Check the first few rows of the raw data set.

```{r}
#To check the dataframe,including number of rows and columns
glimpse(rawdata)

#To see the first few rows of the dataframe as tibble use head()
#More readable but only shows the first 6 rows 
head(rawdata)

```

After that, check for any missing data. There are many ways to do it; the naniar package allows to visualize the missing data.

```{r}
#Install the naniar package in console and load to visualise missing data
#Code--> install.packages("naniar)
library(naniar)

#Visualise missing data
vis_miss(rawdata)
```

Crosschecking this with the dataframe on the environment showed that the missing data is not the work of missing observations or information in the dataframe, but just empty rows at the bottom.

While missing data here can be deleted using colSums(is.na() and drop_na(), it is not necessary here since the missing data is just a bunch of extra rows at the end of the dataframe that includes no data whatsoever. It is easier to simply avoid using it in the revised dataframe.

The next step is to tidy the data and create a new dataframe including only the required variables for the visualizations to answer the research question for this mini-project.

This involves creating new columns for the mean values for the Mental Health columns, Connection to Nature columns, and Self-efficacy columns. The data in the gender column will also have to be changed to 'male' and 'female' from their coded values. The column named D_hours will be used but does not require any modifications.

```{r}
#Create the revised dataframe as an object
revdata <- rawdata %>% 
  mutate( #create new columns with the mean values from the MH, Nat, SEff columns
    mean_mh = rowMeans(across(.cols = starts_with("MH"))),
    mean_nat = rowMeans(across(.cols = starts_with("Nat"))),
    mean_seff = rowMeans(across(.cols = starts_with("SEff"))),
    #change numberical values to factors in the gender column 
    #check the codebook and use the correct values; 1=Man, 2=Women
    Gender = factor(D_Gender, levels = c(1,2), labels = c("Men", "Women"))
    ) %>% 
  #Select only the required columns for the revised dataframe
  select (c("Gender", "D_hours", "mean_mh", "mean_nat", "mean_seff")) 


#New dataframe should be visible in environment now
#Check if the changes have been made correctly
head(revdata)

  
```

Visualizations

-   Graph or graphs

-   Documentation explaining any motivation (although good graph labelling is better than explanation in the accompanying text)

-   Code for producing graph(s)

**Summary**

-   Brief thoughts on what you have learnt, what you might do next if you had more time / more data
